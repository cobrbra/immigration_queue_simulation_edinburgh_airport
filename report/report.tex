\documentclass[10pt]{article}
\textwidth 16.5cm
\textheight 23.5cm
\oddsidemargin 0pt
\topmargin -2cm
% \usepackage{epsf}

% Draft watermark
% \usepackage{draftwatermark}

% Font and formatting
\usepackage[default]{lato}
\usepackage[skip=3pt]{parskip}
\usepackage{titlesec}
\titlespacing{\paragraph}{0pt}{*1}{*2}

% \usepackage[compact]{titlesec} 


% Writing maths
\usepackage{
    amsmath, % aligns, equations, etc.
    amsfonts, % blackboard bold, etc.
    bbm, % blackboard bold for numbers.
}

% Figures
\usepackage{graphicx}
\usepackage{floatrow}
\floatsetup[table]{capposition=top}
% References
\usepackage[colorlinks,linkcolor=black,citecolor=blue,urlcolor=blue,breaklinks = true]{hyperref}
\usepackage[sort&compress, numbers]{natbib}
\bibliographystyle{unsrtnat}
% \setcitestyle{authoryear, open={(},close={)}}


% Acronyms
\usepackage[acronym, toc]{glossaries-extra}

\setabbreviationstyle[acronym]{long-short}
\glssetcategoryattribute{acronym}{nohyperfirst}{true}
\renewcommand*{\glsdonohyperlink}[2]{%
 {\glsxtrprotectlinks \glsdohypertarget{#1}{#2}}}

 \newacronym{bfo}{BFO}{Border Force Officer}
 \newacronym[plural=SLAs, firstplural=Service Level Agreements]{sla}{SLA}{Service Level Agreement}
 \newacronym[plural=eGates, firstplural=electronic passport Gates]{egate}{eGate}{electronic passport Gate}
 \newacronym[plural=KPIs, firstplural=Key Performance Indicators]{kpi}{KPI}{Key Performance Indicator}

% Inline comments from Jacob and Bella
\usepackage{xcolor}
\usepackage[draft,inline,nomargin,index]{fixme}
\fxsetup{theme=color,mode=multiuser}
\FXRegisterAuthor{jb}{ajb}{\color{blue} JB}
\FXRegisterAuthor{bd}{abd}{\color{red} BD}

\title{Planning for Future Demand on Border Operations\\ at Edinburgh Airport}
 \author{Isabella Deutsch and Jacob R. Bradley}
 \date{}

\begin{document}
\maketitle

\section{Introduction}

A large number of passengers arriving internationally at Edinburgh Airport need to pass through immigration. These passengers are either processed at a desk staffed by a \gls{bfo} or, for passengers of certain nationalities, at an automated \gls{egate}. With overall passenger footfall expected to increase substantially over the next five years, pressure on immigration services is also growing, and the airport will need to adapt its operations in order to accommodate its international arrivals safely and efficiently. In particular, the airport has committed to several \glspl{sla} ensuring quality of experience for arrivals. One avenue being explored to meet \glspl{sla} under increased demand is the expanded use of \glspl{egate}, both through additional construction and measures encouraging increased uptake \cite{UK_border_2025}. In this report we investigate the outcomes of these measures, providing clear recommendations for \gls{egate} construction and usage over the next five years (2023-2027). For key results, see our one page high-level summary.
% This does not apply for anyone arriving from the United Kingdom (including Northern Ireland), the Crown Dependencies, and the Republic of Ireland, as there are no routine passport controls between these countries \cite{common_travel_area}.
% Only passengers of certain nationality are eligible to use the \glspl{egate}, as defined below. There are currently 9 desks and 10 \glspl{egate} in operation at Edinburgh Airport. 

\subsection{Problem Statement}
The task set by Edinburgh Airport is to develop a simulation model of immigration queuing that can be used to test a variety of demand scenarios, including overall and demographic changes in passenger arrivals, process enhancements, and increased \gls{egate} availability. 
Additionally, sensitivity analysis is required to assess the robustness of these recommendations under a variety of perturbation scenarios.
The overall performance of Edinburgh Airport's immigration queuing operation is measured via three \glspl{kpi} and their related \glspl{sla}, defined below.

\subsection{Key Performance Indicators}

Three \glspl{kpi} have been identified to form the basis of the airport's \glspl{sla}. We define them as follows.

\begin{itemize}
    \item \textbf{Queue length(s)}: The number of passengers queuing for a desk or \gls{egate} in the immigration hall/overflow zone at any given time.
    \item \textbf{Queue time}: Minutes between arrival at the immigration hall/overflow zone and arrival at a desk/\gls{egate} for a given passenger arriving at Edinburgh Airport. 
    \item \textbf{Overflow usage}: Indicating which immigration hall overflow capacity was in use.
\end{itemize}

Note that \textit{queue length} is measured as a function over time, i.e. we record the queue length every minute, even if no passengers are arriving. Based on this granular data we can then compute average and maxima statistics. The \textit{queue time}, however, is measured for each arriving passenger and we calculate averages over the passengers. The relationship between queue length and \textit{overflow usage} may be determined in part by the physical division of the immigration hall into desk and \gls{egate} queuing regions.

\subsection{Service Level Agreements}
The \glspl{sla} are derived from the \glspl{kpi} and are descriptive of passenger experience and operational pressure. We consider two \glspl{sla} in our analysis.
\begin{itemize}
    \item \textbf{Proportion of passengers with a queue time less than 15/25/60 minutes.} \\
    This is in line with the competition brief and \cite{UK_border_2025}. It is indicative of the experience of individual passengers in the queue.
    \item \textbf{ Proportion of time the overflow/contingency capacities are used.} \\
    This describes the impact the queue has on the operations of the airport according to the queuing capacities outlined below. It can effect passengers that are not in the immigration queue through due to disruption of other areas of the airport.
\end{itemize}

\section{Data Sources}
This section outlines the datasets used throughout this report. The majority of the data used for the core components of our analysis were provided by Edinburgh Airport via the Edinburgh SIAM \& IMA Student Chapter Modelling Competition \cite{modelling_competition}. Occasionally, it has been useful to make use of some external datasets, which have also been described here. These are all either in the public domain, or are accessible to all researchers participating in the modelling competition. 

\subsection{Competition Data}

We first outline the data received through the modelling competition. This consists of both operational data and future arrivals schedule and is informed by historic data from Edinburgh Airport.


\subsubsection{Operational Data}

\paragraph{Hall capacity}
The immigration hall at Edinburgh Airport has a \textit{initial capacity} of 500 people. Its \textit{overflow capacity}, which can be used without overly impacting other areas of the operation, is a further 150 people. There is also a \textit{contingency capacity} for additional 600 people. However, its usage negatively impacts the operations of the airport.

\paragraph{Coached vs contact}
Once an aircraft has reached its parking position there are two ways for passengers to reach the terminal building. \textit{Contact} passengers walk by foot to the immigration queue. \textit{Coached} passengers exit the aircraft via stairs and are loaded onto buses, which bring them to the terminal building. The percentage of contact passengers lies around 80\% and varies across years (see Figure~\ref{fig:future_passenger_burden}).

\paragraph{Border check transaction times} It takes on average 90 seconds (15 seconds standard deviation) to be processed at a \gls{bfo}-staffed desk. The transaction time at an \gls{egate} is generally shorter with an average of 45 second (5 seconds standard deviation). 

\paragraph{eGate eligibility for EU+ passengers}
Passengers of the following nationalities are allowed to use \glspl{egate}: EU countries, Australia, Canada, Iceland, Japan, Liechtenstein, New Zealand, Norway, Singapore, South Korea, Switzerland, and the USA. In the following we refer to these countries as \textit{EU+}. 

\paragraph{eGate failure rate}
Some passengers who use an \gls{egate} fail to pass through it successfully and need to be processed at a desk instead. This failure rate lies at 9\%.

\paragraph{UKIE flights} Flights arriving from the United Kingdom (including Northern Ireland), the Crown Dependencies, and the Republic of Ireland (referred throughout as \textit{UKIE}) do not need to be processed by immigration services, as there are currently no routine passport controls between these countries \cite{common_travel_area}.

\paragraph{Early and delayed flights}
In the summer of 2019 only 58\% of flights arrived on time (measured if arrived within 15 minutes of scheduled arrival), 21\% were late, and 21\% were early. Of those that were early, average arrival time was 21 minutes ahead of schedule (standard deviation 6 minutes). For late arrivals, average delay was 50 minutes (standard deviation 56 minutes).

\subsubsection{Future Arrivals Data} \label{sec:future_arrivals_data}
Via the modelling competition, we have been provided with an anticipated future arrivals schedule and passenger counts for five July weeks (each Monday to Sunday) over the next five years (2023-2027). These comprise a total of 4,123 flights and represent increasing aircraft arrivals over time. These are reflected in an increased passenger throughput over the same time period, comprising increases in both coached and contact arrivals (Figure~\ref{fig:future_passenger_burden}). We are not provided with information on passenger nationalities, or airports of departure. We assume in the following that these do not include domestic/UKIE flights. 

% \input{tables/anticipated_schedule}


\begin{figure}[!ht]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/future_passenger_burden_fig.png}
     \caption{
     Historical and anticipated passengers arriving in Edinburgh Airport on international (non-UKIE) flights. For anticipated arrivals, passengers are split by route (coached vs contact).} \label{fig:future_passenger_burden}
\end{figure}

\subsection{External Datasets} \label{sec:observed_arrivals_data}

\paragraph{eGate utilisation}
The UK government's target for \gls{egate} usage among those eligible is 80\% \cite{UK_border_2025}, which was broadly met on a national level in 2019 and the first quarter of 2020. For airports in Scotland and the North of England the uptake was consistently lower at around 70\% for the same period \cite{Inspection_eGates}. While there were no publicly available data for Edinburgh Airport, Glasgow Airport's uptake of around 60\% represents some of the lowest utilisation of \glspl{egate} nationwide \cite{Inspection_eGates}, and may serve as a reference/lower band due to its proximity.

\paragraph{Average queue time for eGates}
The average queue time at \glspl{egate} at UK airports for the financial years 2017-18, 2018-19, 2019-20 and Q1 2020 was six minutes and one second \cite{Inspection_eGates}. Stansted and Luton reported averages just below the three minute mark. Glasgow Airport's average waiting time at the \glspl{egate} was over 8.5 minutes. However, their calculation was based a shorter time period (December 2017, January 2018, and February 2019), and may therefore be unrepresentative \cite{Inspection_eGates}.


\paragraph{Historical arrivals data}
We accessed complementary historical historical flight arrivals data of more than 83,000 passenger flight from the Edinburgh Airport Noise Lab \cite{noise_lab}. For these flight arrivals from the years 2019 to 2022, we were able to recover airport of origin, aircraft type (and therefore a proxy for passenger count), and scheduled vs. actual arrival time. We were not, however (unlike for anticipated future arrivals) able to recover coached vs. contact status (Figure~\ref{fig:future_passenger_burden}). We see this dataset, therefore, as useful for validating distributional assumptions around aircraft arrival times and passenger demographics. 

% \input{tables/observed_schedule}

Aircraft type and maximum passenger capacity were established by cross-linking with another publicly available dataset \cite{aircraft_capacity}. The average percentage of occupied seat for a given flight ranges from 86\% in 2019 for international flights in the UK \cite{loading_factor_national} to self-reported 91\% for a budget airline in 2022 \cite{loading_factor_ryanair}.

\paragraph{Airport classification}
We assume that the passenger nationality split depends on departure airport, and therefore group airports into the following categories: 
\begin{itemize}
    \item \textbf{UKIE}: All airports in the United Kingdom (including Northern Ireland), the Crown Dependencies, and the Republic of Ireland.
    \item \textbf{EU+ hubs}: Hub airports in EU+. These are Amsterdam Schiphol (AMS), Atlanta International (ATL), Paris Charles de Gaulle (CDG), Dallas (DFW), Denver (DEN), Frankfurt (FRA), and Chicago O'Hare (ORD) \cite{mega_hubs}.
    \item \textbf{EU+ non-hubs}: Airports which are not hubs but are located in EU+.
    \item \textbf{Other hubs}: Hub airports outside of EU+. These are Dubai (DBX) and Istanbul (IST) \cite{mega_hubs}.
    \item \textbf{Other non-hubs}: Airports which are not hubs and are located outside of EU+.
\end{itemize}


\section{Methods} \label{sec:methods}

In this section we describe our methodological set up that allows us to process the provided data under different scenarios, which allows us to compare them according to their \glspl{kpi} and related \glspl{sla}.

\subsection{Passenger Processing Model}

    For all subsequent modelling we use a conceptual `passenger processing model' describing the steps an arriving international passenger experiences at Edinburgh Airport. Such a model is inherently a simplified view, but ideally chosen at a level of abstraction is nevertheless informative of real-world processes. The passenger processing model consist of three steps, which are outlined below and in subsequent sections:
\begin{enumerate}
    \item \textbf{Aircraft}: Aircraft with passengers on board arrive at Edinburgh Airport. The aircraft taxi to their parking positions and their doors are opened. \label{step:aircraft}
    \item \textbf{Route}: Passengers make their way from their aircraft to the immigration hall, either by walking to the building (contact) or via a bus (coached). \label{step:route}
    \item \textbf{Immigration}: Passengers queue in the immigration hall and are processed at the border, either by a \gls{bfo} at a desk or at an automated \gls{egate}. \label{step:immigration}
\end{enumerate}
 We visualise the flow of information through our processing model in Figure~\ref{fig:PPM_threesteps}. We start with a dataset of arriving flights and generate a dataset of passengers (\textit{Aircraft} step). In the \textit{Route} step these passengers are then brought from the aircraft to the immigration hall. Finally, in the \textit{Immigration} step they queue up and are subsequently processed at the border.

\begin{figure}[!ht]
    \centering
    \includegraphics[width=0.7\textwidth]{figures/ThreeSteps.png}
     \caption{Three steps that make up the passenger processing model.  } \label{fig:PPM_threesteps}
\end{figure}

\subsection{Assumptions and Choices}
% these are slightly different for competition and noise data
At each step of the Passenger Processing Model there are assumptions to be made and choices to be taken. We summarise them here. Our key parameters for robustness checks are the number of \glspl{egate}, \gls{egate} eligibility, and the \gls{egate} uptake, which are defined in Section~\ref{subsec:choices_immigration}.

\subsubsection{Aircraft}

\paragraph{Departing airport classification}
The arrivals dataset provided by the modelling competition (Section~\ref{sec:future_arrivals_data}) does not contain information regarding the departing airport. As this is provided in the additional dataset (Section~\ref{sec:observed_arrivals_data}) we are able to randomly sample airport classifications for the competition dataset conditional on the number of passengers on the flight, for an approximate distributional match. 



% \paragraph{Number of passengers}
% The competition dataset contains the number of passengers on board each flight. This information is not available for the additional historical data, but can be simulated with the aircraft type, its maximum capacity, and the load factor. \jbnote{Do we need to choose an overall load factor? Also slightly unsure if we'll ever actually ever need this simulated on historical data.} \bdnote{we use it indirectly to simulate an airport classification as the load factor goes into the historical quantiles. Could also be ignored.}

\paragraph{Coached vs contact}
The competition data gives an overall split of flights that are coached or contact for each year. We assume that the decision between coached or contact is independent of all flight characteristics. Anticipated future coached vs. contact splits are shown in Figure~\ref{fig:future_passenger_burden}, with coached arrivals continuing to form a minority, albeit an increasing one, of future aircraft arrivals. We explore the effects of non-independent occurrence of coached arrivals in Section~XX \jbnote{Robustness analysis I'd like to do: repeat whatever the main analysis pipeline is, with all coached in the biggest flights}.


\subsubsection{Route}

\paragraph{Arrival profile} 
 Passengers  brought to the immigration hall coach arrive at the queue in rapid succession. Coached passengers arrive at the immigration queue on average every 1 second. Contact passengers make it to the immigration queue every 5 seconds.

\paragraph{Coach availability}
For this analysis we assume sufficient coaches are always available to transport passengers from the aircraft to the airport building. While this might not be always the case, it provides us with a ``worst case'' scenario from the perspective of the immigration hall, which is most interesting for us. Any delay in passengers due to unavailability of coaches would smooth out peaks.

\subsubsection{Immigration} \label{subsec:choices_immigration}

\paragraph{Number of eGates and desks} There are currently 10 \glspl{egate} and 9 \gls{bfo}-staffed desks in use at Edinburgh Airport. In our analysis we simulate the effects of increased \gls{egate} construction.



\paragraph{eGate eligibility} 
As only passengers from certain countries are can use \glspl{egate}, we make the percentage of passengers eligible for \glspl{egate} per aircraft dependent on the classification of the airport. For example, we assume that an aircraft from a hub is more likely to carry a variety of international passengers, of which fewer can use \glspl{egate} compared to a flight from a EU+ non-hub. \jbnote{This needs a lot of attention, in write up and in modelling approach.}

\paragraph{eGate uptake} 
Not all passengers who are eligible to use eGates choose to do so for a variety of reasons. As a base case we use a 70\% uptake, which is selectively increased in our simulation. 


\paragraph{Priority for failed eGate passengers}
Passengers who used an \gls{egate}, but failed to use it successfully, need to exit the \gls{egate} back into the immigration hall to complete their immigration at a staffed desk. They join a separate queue towards the desks, which is located next to the general desk queue. Whenever a desk can handle a new person, priority is given to the passenger from the failed \gls{egate} queue with a probability of 75\%.

% \paragraph{Capacity split}
% Which percentage of the hall capacity is allocated to the desk queue. Varied to change the effect of queue length of contingency usage.
% Note that we can't split the other areas

\subsection{Implementation}

We now describe how we process the competition data sets to calculate the \glspl{kpi} under different simulation scenarios. Figure~\ref{fig:workflow_fig} gives an illustration of our workflow for two-hour window of arriving aircraft and their passengers. 

\begin{figure}[!ht]
    \centering
    \includegraphics[width=1.1\textwidth]{figures/workflow_fig.png}
     \caption{
    .} \label{fig:workflow_fig}
\end{figure}


\subsubsection{Aircraft}
We take the provided flight schedule data as an input of the Aircrafts step. We assume that all of the flights provided are coming from non-UKIE destinations and hence their passengers need to clear immigration at Edinburgh Airport. Based on the flight schedule we simulate the actual arrival according to the given delayed/early arrival information. Given the provided split per year we decide at random for each flight if it is coached or contact. Based on this we sample a base transit time from the parking position. The passenger numbers per flight are known, and we use this information to sample a departure airport classification according to the empirical distribution obtained from the historic flight data.

Taking the above flight information as an input we generate a list of passengers per flight. For each passenger we sample a nationality classification based on the departure airport. The output of the Aircraft step is a passenger list, which also contains all the covariates describing their flight.

\subsubsection{Route}

Given the passenger list from the previous step, we simulate the time spent for each passenger to get from their flight's parking position and to the immigration queue. This is depending on the base transit time and whether they were on a coached flight or not.

This step adds additional information to each passenger. Crucially, it gives us the arrival time of each passenger at the immigration queue. 

\subsubsection{Immigration}

Based on the passenger-level information obtained in the previous step we now process each passenger at the border according to their arrival time at the immigration queue. First, we determine the eligibility to use \glspl{egate} per passenger according to their nationality classifications. 

Passengers not eligible to use \glspl{egate} join the desk queue and, once they reach the front of the queue and a free desk becomes available, they are processed by a \gls{bfo}. We assume that each \gls{bfo} has their own mean transaction rate and sample the processing time for each passenger such that the overall transaction times match the provided information. Once a passenger is processed at a desk they have passed immigration and leave the system.

Not all passengers eligible to use \glspl{egate} will do so. The decision to use \gls{egate} is taken for each passenger according to the chosen \gls{egate} uptake rate. \gls{egate}-eligible passengers who choose to use a desk instead join the desk queue and are processed like any other passengers in that queue. 

Those who are eligible to use \glspl{egate} and choose to do so join the \gls{egate} queue. Once a passenger reaches the front of the queue and a free \gls{egate} becomes available they step into the \gls{egate} and are processed according to the provided transaction time. Most passengers finish this process successfully and exit the \gls{egate} on the other side, which completes their immigration and they exit the system.

A small fraction of passengers does not pass the \gls{egate} successfully. They are prompted to step out of the \gls{egate} back into the hall and have not completed immigration yet. Instead, they need to be processed by a \gls{bfo}. For that, these passengers are directed towards a separate queuing area in the middle of the hall that brings them towards the front of the desk queue. When a desk becomes available passengers that have failed the \gls{egate} have priority over the passenger at the front of the desk queue with a defined probability. Once they reach a desk, they are processed like any other passenger from the desk queue and exit the system.



\section{Recommendation}

Based on the methodology described in Section~\ref{sec:methods} we have simulated a variety of scenarios. There are three key parameters that we vary across simulations (1) the number of \glspl{egate}, (2) the \gls{egate} eligibility, and (3) the \gls{egate} uptake. This now allows us to make recommendations for the appropriate number of \glspl{egate} to cope with future demand on border operations at Edinburgh Airport. Robustness considerations are subsequently undertaken in Section~\ref{sec:robustness}. 

\subsection{Number of eGates}

It is implicitly assumed that the lowest feasible number of \glspl{egate} is of interest to Edinburgh Airport. Based on our extensive simulation we recommend the \gls{egate} strategy outlined in Table~\ref{tab:recommendation}. 

\begin{table}[!htp]
    \centering
    \begin{tabular}{cccccc}
         2023 & 2024 & 2025 & 2026 & 2027  \\ \hline
          x & x & x & x & x
    \end{tabular}
    \caption{Recommended Number of \glspl{egate} in operation each year.}
    \label{tab:recommendation}
\end{table}

This strategy has been chosen such that XXXX \% of passengers wait less than XXXX per year, given the assumptions of eligibility and uptake as shown in Figure~\ref{fig:recommendation}. This figure also outlines the implications of our proposed strategy on KPI1, KPI2, SLA3, and SLA4. In particular, note that our strategy ensures that XXX. Moreover, the total queue length is under 500 XXX\% of the time.

\begin{figure}[!ht]
    \centering
    \includegraphics[width=\textwidth]{figures/placeholder_recommendations.png}
     \caption{.} \label{fig:recommendation}
\end{figure}

The number of recommended \glspl{egate} is to be understood as the number of \glspl{egate} required to be in operation. If maintenance and unplanned disruption exceed the historically low level \cite{Inspection_eGates}, this needs to be taken into account. 

Our recommendation implies the purchase of a total XX new \glspl{egate}, as there are currently 10 \glspl{egate} in operation at Edinburgh Airport. To put this number into perspective, the Home Office has approved funding of up to 70 \glspl{egate} UK-wide to increase capacity at larger airports \cite{Inspection_eGates}. with Edinburgh being among the top ten busiest airports in the UK \cite{busiestairport}, it does not seem unreasonable to assume that XXX new \glspl{egate} are built over the course of five years. 


\subsection{Hall Layout}
The \gls{sla} considers a total queue length. However, the queue space for desk and \glspl{egate} is separated by dividers, which are typically not moved. We therefore need to consider the given split of the hall space to accurately access whether the queue reaches outside of the hall. This is the case if either queue exceeds its allocated space, not just if the queue length increases beyond 500. 

For our recommended set up
 

\section{Robustness Considerations} \label{sec:robustness}
relate to service level agreement \\
talk about working \glspl{egate}/break down of \glspl{egate}  \\
what if there are more non-UKIE flights  \\  
can make a statement like "delaying purchasing two egates in 2026 instead of 2025 would be the most feasible delay" \\
need to also talk about the hall setup here? \\
could even talk about increase in processing time mean here? \\
increase uptake is reasonable to assume as this can be achieved via flow hosts



\section{Conclusion}
summary of the project and our approach \\
the number of contact spaces is fixed at the airport so if you want more flights you need to coach them (unless you want to undertake big building works) 


\subsection{Future Work}
all the assumptions we made \\
to include limitations \\
include edge cases, such as all gates closed for high risk flights (see Government doc on \glspl{egate}) \\
signange and direction need to be clear (flow hosts increase this and are important 6.28 \cite{Inspection_eGates}) \\
we picked slightly pessimistic where we don't have good notion to avoid accidentally producing an overly optimistic case

{\footnotesize
\bibliography{report/references}}
% \bibliography{report/references.bib}

\end{document}